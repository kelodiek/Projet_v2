@{ Layout = "~/Views/Shared/_LayoutRecherche.cshtml"; }
@{ ViewBag.Title = "Recherche"; }

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"
            type="text/javascript"></script>


<section class="content-header">
    <h1>
        Recherche
        <small>Simple</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Accueil</a></li>
        <li class="active">Recherche</li>
    </ol>
</section>

<section class="content">
    <script type="text/javascript">
        $('select').select2();
    </script>
    <!-- Ici, c'Est le script qui va assigner une fonction onchange sur les filtres-->
    <script>
        @* C'est la fonction qui va créer le tableau des recherches *@
        function creerTableau(choix) {
            var Nom = choix.value;
            var NomComplet = Nom.replace(" ", "");
            document.getElementById("Select1").value = "";
            var url = '/Recherche/Get' + NomComplet;
            if (choix.value != "") {
                $.ajax({
                    url: url,
                    contentType: 'application/html; charset=utf-8',
                    type: 'GET',
                    dataType: 'html'

                })
                .success(function (result) {
                    $('#ResultatRecherche').replaceWith(result);
                })
            .error(function (xhr, status) {
                alert(xhr.responseText);
            })
            }
        }
        @* C'est la fonction qui sert à remplir la première ListBox de filtre *@

        function ChargerFiltre1() {
            $.ajax({
                url: '/Recherche/GetFiltre1',
                contentType: 'application/html; charset=utf-8',
                type: 'GET',
                dataType: 'html'

            })
            .success(function (result) {
                $('#First').replaceWith(result);
            })
        .error(function (xhr, status) {
            alert(status);
        })
        }
        //PERMET DE SELECTIONNER UN ELEMENT DU TABLEAU ET EN FAIRE LA SELECTION
        function Selectionner(ID) {
            var option = document.getElementById("First").value;
            if((option == "")&&(option == "")){

            }
            document.getElementById("Select1").value = ID.cells[0].innerHTML;
            document.getElementById("Second").style.visibility = "visible";
            document.getElementById("Select2").style.visibility = "visible";
        }

        // ICI C'EST POUR RECHERCHER UN TRUC CORRESPONDANT AUX INFOS DANS LE TABLEAUX D'INFO (PART 2)
        var $rows = $('#table tr');
        $('#search').keyup(function () {
            var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();
        });


    </script>
    <div class="box box-default color-palette-box">
        <div class="box-header with-border">
            <div class="btn-group-sm">
                <a class="btn btn-sm btn-info btn-flat pull-left">Recherche Avancée</a>
                <a class="btn btn-sm btn-info btn-flat pull-right">Retour</a>
            </div>
        </div>
        <div class="box-body">
            <div style="width:50%; float:left;">
                <div class="form-group">
                    <label>Date de :</label>
                    <input type="date" name="DateDebut">
                    <label style="margin-left:10px">à :</label>
                    <input type="date" name="DateFin">
                </div>
                <div class="form-group" id="Filtreur">
                    <label> Filtre : </label>
                    <!-- ICI LES LISTOX S'AUTOGÉNÈRENT LORSQUE UNE SÉLECTION À ÉTÉ FAITE -->
                    <select id="First" onchange="creerTableau(this)" onload="ChargerFiltre1()">
                    </select>
                    <select id="Second" onchange="creerTableau(this)" style="visibility:hidden"></select>
                    <select id="Third" onchange="creerTableau(this)" style="visibility:hidden"></select>
                </div>
                <div class="form-group" id="Selectioneur">
                    <label> Sélection : </label>
                    <input type="text" id="Select1">
                    <input type="text" id="Select2" style="visibility:hidden">
                    <input type="text" id="Select3" style="visibility:hidden">
                </div>
            </div>
        </div>

    </div>
    <div class="box box-default color-palette-box table-responsive">
        <div class="box-header with-border">
            <div class="btn-group-sm">
                <a class="btn btn-sm btn-info btn-flat pull-left">Rechercher</a>
                <a class="btn btn-sm btn-info btn-flat pull-right" onclick="RenvoieResultat()">Résultats</a>
                <input type="text" name="Recherche" placeholder="Recherche ..." id="search"style="margin-left:5px">
            </div>
        </div>

        <!-- C'est la parti tableau qui est défini selon les filtres-->

        <div class="box-body">
            <table class="table table-bordered" id="ResultatRecherche"></table>
        </div>
    </div>
    @*<div class="daterangepicker dropdown-menu show-calendar opensleft" style="top: 491px; right: 25.5px; left: auto; display: block;"><div class="calendar first left"><div class="calendar-date"><table class="table-condensed"><thead><tr><th class="prev available"><i class="fa fa-arrow-left icon icon-arrow-left glyphicon glyphicon-arrow-left"></i></th><th colspan="5" class="month">Nov 2015</th><th class="next available"><i class="fa fa-arrow-right icon icon-arrow-right glyphicon glyphicon-arrow-right"></i></th></tr><tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr></thead><tbody><tr><td class="available off" data-title="r0c0">25</td><td class="available off" data-title="r0c1">26</td><td class="available off" data-title="r0c2">27</td><td class="available off" data-title="r0c3">28</td><td class="available off" data-title="r0c4">29</td><td class="available off" data-title="r0c5">30</td><td class="available off" data-title="r0c6">31</td></tr><tr><td class="available" data-title="r1c0">1</td><td class="available" data-title="r1c1">2</td><td class="available" data-title="r1c2">3</td><td class="available" data-title="r1c3">4</td><td class="available" data-title="r1c4">5</td><td class="available" data-title="r1c5">6</td><td class="available" data-title="r1c6">7</td></tr><tr><td class="available" data-title="r2c0">8</td><td class="available" data-title="r2c1">9</td><td class="available" data-title="r2c2">10</td><td class="available active start-date end-date" data-title="r2c3">11</td><td class="available" data-title="r2c4">12</td><td class="available" data-title="r2c5">13</td><td class="available" data-title="r2c6">14</td></tr><tr><td class="available" data-title="r3c0">15</td><td class="available" data-title="r3c1">16</td><td class="available" data-title="r3c2">17</td><td class="available" data-title="r3c3">18</td><td class="available" data-title="r3c4">19</td><td class="available" data-title="r3c5">20</td><td class="available" data-title="r3c6">21</td></tr><tr><td class="available" data-title="r4c0">22</td><td class="available" data-title="r4c1">23</td><td class="available" data-title="r4c2">24</td><td class="available" data-title="r4c3">25</td><td class="available" data-title="r4c4">26</td><td class="available" data-title="r4c5">27</td><td class="available" data-title="r4c6">28</td></tr><tr><td class="available" data-title="r5c0">29</td><td class="available" data-title="r5c1">30</td><td class="available off" data-title="r5c2">1</td><td class="available off" data-title="r5c3">2</td><td class="available off" data-title="r5c4">3</td><td class="available off" data-title="r5c5">4</td><td class="available off" data-title="r5c6">5</td></tr></tbody></table></div></div><div class="calendar second right"><div class="calendar-date"><table class="table-condensed"><thead><tr><th></th><th colspan="5" class="month">Nov 2015</th><th class="next available"><i class="fa fa-arrow-right icon icon-arrow-right glyphicon glyphicon-arrow-right"></i></th></tr><tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr></thead><tbody><tr><td class="off disabled" data-title="r0c0">25</td><td class="off disabled" data-title="r0c1">26</td><td class="off disabled" data-title="r0c2">27</td><td class="off disabled" data-title="r0c3">28</td><td class="off disabled" data-title="r0c4">29</td><td class="off disabled" data-title="r0c5">30</td><td class="off disabled" data-title="r0c6">31</td></tr><tr><td class="off disabled" data-title="r1c0">1</td><td class="off disabled" data-title="r1c1">2</td><td class="off disabled" data-title="r1c2">3</td><td class="off disabled" data-title="r1c3">4</td><td class="off disabled" data-title="r1c4">5</td><td class="off disabled" data-title="r1c5">6</td><td class="off disabled" data-title="r1c6">7</td></tr><tr><td class="off disabled" data-title="r2c0">8</td><td class="off disabled" data-title="r2c1">9</td><td class="off disabled" data-title="r2c2">10</td><td class="available active start-date end-date" data-title="r2c3">11</td><td class="available" data-title="r2c4">12</td><td class="available" data-title="r2c5">13</td><td class="available" data-title="r2c6">14</td></tr><tr><td class="available" data-title="r3c0">15</td><td class="available" data-title="r3c1">16</td><td class="available" data-title="r3c2">17</td><td class="available" data-title="r3c3">18</td><td class="available" data-title="r3c4">19</td><td class="available" data-title="r3c5">20</td><td class="available" data-title="r3c6">21</td></tr><tr><td class="available" data-title="r4c0">22</td><td class="available" data-title="r4c1">23</td><td class="available" data-title="r4c2">24</td><td class="available" data-title="r4c3">25</td><td class="available" data-title="r4c4">26</td><td class="available" data-title="r4c5">27</td><td class="available" data-title="r4c6">28</td></tr><tr><td class="available" data-title="r5c0">29</td><td class="available" data-title="r5c1">30</td><td class="available off" data-title="r5c2">1</td><td class="available off" data-title="r5c3">2</td><td class="available off" data-title="r5c4">3</td><td class="available off" data-title="r5c5">4</td><td class="available off" data-title="r5c6">5</td></tr></tbody></table></div></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start">From</label><input class="input-mini" type="text" name="daterangepicker_start" value=""></div><div class="daterangepicker_end_input"><label for="daterangepicker_end">To</label><input class="input-mini" type="text" name="daterangepicker_end" value=""></div><button class="applyBtn btn btn-small btn-sm btn-success">Apply</button>&nbsp;<button class="cancelBtn btn btn-small btn-sm btn-default">Cancel</button></div></div></div>*@
</section>
<script>

    window.onload = ChargerFiltre1;

</script>